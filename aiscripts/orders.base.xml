<?xml version="1.0" encoding="utf-8"?>
<diff xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../../../ORIGINAL_MODS_DO NOT_MODIFY/X4Original/libraries/diff.xsd">

  <!-- Prevent undocking for GalaxyTrader DockAndTrain orders -->
  <add sel="//aiscript[@name='orders.base']/attention/actions/do_if[@value='$undock?']" pos="before">
    <do_if value="@$undock and (($object.order.id == 'DockAndTrain') or ($object.order.id == 'DockAndWait' and @$object.order.$callerid.id == 'DockAndTrain'))">
      <remove_value name="$undock"/>
      <debug_text text="'[GT_TRAINING PATCH] Preventing undock for DockAndTrain order on ship: ' + $object.knownname" chance="if $object.isplayerowned then 100 else 0"/>
    </do_if>
  </add>

</diff> 